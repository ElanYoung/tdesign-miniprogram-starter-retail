<wr-loading-content position="fixed" type="spinner" wx:if="{{pageLoading}}" />
<view class="page-container">
	<t-navbar
	 title="{{pageNav.title}}"
	 left-icon="slot"
	 t-class-title="t-class-title"
	>
		<t-icon
		 slot="left-icon"
		 t-class="navigation-bar__btn"
		 name="chevron-left"
		 bind:tap="navBackHandle"
		/>
	</t-navbar>
	<t-pull-down-refresh id="t-pull-down-refresh" bind:refresh="onPullDownRefresh_">
		<!-- 页面内容 -->
		<view class="service-detail safe-bottom">
			<!-- 状态及描述 -->
			<view class="service-detail__header">
				<view class="title">
					<t-icon wx:if="{{service.status === 100}}" name="money-circle" size="xl"></t-icon>
					<t-icon wx:if="{{service.status === 1}}" name="check-circle"  size="xl"></t-icon>
					{{service.statusName}}
				</view>
				<view class="desc">
					{{service.statusDesc}}
				</view>
			</view>
			<!-- 退款金额 -->
			<view class="service-section__pay pay-result" wx:if="{{service.isRefunded || byOrderCancel}}">
				<t-cell
				 t-class-title="title"
				 t-class-note="right"
				 t-class="t-class-wrapper-first-child"
				 title="{{service.isRefunded ? '退款金额' : '预计退款金额'}}"
				 bordered="{{false}}"
				>
					<wr-price slot="note" price="{{service.refundRequestAmount}}" fill />
				</t-cell>
				<t-cell
				 wx:for="{{service.refundMethodList}}"
				 wx:key="name"
				 wx:for-index="index"
				 wx:for-item="item"
				 t-class-title="t-cell-title"
				 t-class-note="t-cell-title"
				 t-class="t-class-wrapper"
				 title="{{item.name}}"
				 bordered="{{service.refundMethodList.length - 1 === index ? true : false}}"
				>
					<wr-price slot="note" price="{{item.amount}}" fill />
				</t-cell>
				<block wx:if="{{service.isRefunded}}">
					<t-cell
					 title=""
					 t-class="t-class-wrapper-first-child"
					 t-class-description="label"
					 description="说明：微信退款后，可以在微信支付账单查询，实际退款到时间可能受到银行处理时间的影响有一定延时，可以稍后查看"
					/>
				</block>
			</view>
			<!-- 物流 -->
			<view class="service-section" wx:if="{{deliveryButton.name || service.logisticsNo}}">
				<view class="service-section__title">
					<t-cell bordered="{{false}}">
						<view slot="title">
							<wr-icon name="wuliu" wr-class="icon" />
							退货物流
						</view>
						<view
						 slot="note"
						 wx:if="{{deliveryButton.name}}"
						 class="right text-btn"
						 bindtap="onDeliveryButtonTap"
						 data-type="{{deliveryButton.type}}"
						>
							{{deliveryButton.name}}
						</view>
					</t-cell>
				</view>
				<view class="section-content" wx:if="{{service.logisticsNo}}">
					<t-cell bordered="{{false}}" title="运单号" note="{{service.logisticsNo}}" />
					<t-cell bordered="{{false}}" title="物流公司" note="{{service.logisticsCompanyName}}" />
				</view>
			</view>
			<!-- 收货地址 -->
			<!-- <view class="service-section" wx:if="{{service.receiverName}}">
				<view class="service-section__title">
					<view>
						<t-icon name="location" t-class="icon" />
						退货地址
					</view>
					<view class="right text-btn" bindtap="onAddressCopy">复制</view>
				</view>
				<view class="section-content">
					<view class="main">
						{{service.receiverName}}
						<view class="phone-num">{{service.receiverPhone}}</view>
					</view>
				</view>
				<view class="section-content">
					<view class="label">{{service.receiverAddress}}</view>
				</view>
			</view> -->
			<!-- 商品卡片 -->
			<view class="service-section" wx:if="{{service.goodsList && service.goodsList.length > 0}}">
				<wr-service-goods-card
				 wx:for="{{service.goodsList}}"
				 wx:key="id"
				 wx:for-item="goods"
				 goods="{{goods}}"
				 no-top-line
				 bindtap="onGoodsCardTap"
				 data-index="{{index}}"
				/>
			</view>
			<!-- 退款信息 -->
			<view class="service-section__pay">
				<t-cell bordered="{{false}}" title="退款信息" t-class="t-refund-wrapper" />
				<t-cell
				 bordered="{{false}}"
				 t-class="t-refund-wrapper"
				 t-class-title="t-refund-info"
				 t-class-note="t-refund-info"
				 title="订单编号"
				 note="{{service.orderNo}}"
				/>
				<t-cell
				 bordered="{{false}}"
				 t-class="t-refund-wrapper"
				 t-class-title="t-refund-info"
				 t-class-note="t-refund-info"
				 title="服务单号"
				 note="{{service.rightsNo}}"
				>
					<view slot="right-icon" class="text-btn" bindtap="onServiceNoCopy">复制</view>
				</t-cell>
				<t-cell
				 bordered="{{false}}"
				 t-class="t-refund-wrapper"
				 t-class-title="t-refund-info"
				 t-class-note="t-refund-info"
				 title="退款原因"
				 note="{{service.rightsReasonDesc}}"
				/>
				<t-cell
				 bordered="{{false}}"
				 t-class="t-refund-wrapper"
				 t-class-title="t-refund-info"
				 t-class-note="t-refund-info"
				 title="退款金额"
				>
					<wr-price slot="note" price="{{service.refundRequestAmount}}" fill />
				</t-cell>
				<t-cell
				 bordered="{{false}}"
				 t-class="t-refund-wrapper"
				 t-class-title="t-refund-info"
				 t-class-note="t-refund-info"
				 title="申请时间"
				 note="{{service.createTime}}"
				/>
			</view>
			<!-- 凭证/说明 -->
			<view class="service-section__pay" wx:if="{{showProofs}}">
				<t-cell
				 bordered="{{false}}"
				 title="凭证/说明"
				 t-class="t-refund-wrapper"
				 t-class-title="t-refund-info"
				 description="{{service.applyRemark}}"
				/>
				<t-grid border="{{false}}" gutter="{{10}}" column="{{3}}">
					<t-grid-item
					 wx:for="{{gallery.proofs}}"
					 wx:key="index"
					 image="slot"
					 bindclick="onProofTap"
					 data-index="{{index}}"
					>
						<t-image slot="image" t-class="t-refund-info-img" src="{{item}}"></t-image>
					</t-grid-item>
				</t-grid>
			</view>
			<t-swiper
			 wx:if="{{gallery.show}}"
			 current="{{gallery.current}}"
			 img-srcs="{{gallery.proofs}}"
			 full-screen
			 circular="{{false}}"
			 bindtap="onProofTap"
			/>
			<!-- 底部栏 -->
			<view wx:if="{{serviceRaw.buttonVOs && serviceRaw.buttonVOs.length > 0}}" class="footer-bar-wrapper safe-area-bottom">
				<view class="footer-bar">
					<wr-service-button-bar service="{{service}}" bindrefresh="onRefresh" />
					<view class="safe-area-bottom" />
				</view>
			</view>
		</view>
	</t-pull-down-refresh>
</view>
<t-toast id="t-toast" />
<t-dialog id="t-dialog" />

